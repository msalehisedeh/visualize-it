!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],e):e(n["visualize-it"]={},n.ng.core,n.ng.common)}(this,function(n,e,t){"use strict";function o(n,e){var t,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(n,s)}catch(a){i=[6,a],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var r=function(){function n(){this.showLegend=!1,this.showHelp=!1,this.typeMapping={},this.onVisualization=new e.EventEmitter}return n.prototype.triggerEvaluation=function(n){if(n.length){this.d3Container.nativeElement.innerHTML="";var e={},t={links:[],nodes:[]};n.map(function(n,t){return e[n.id]=t}),n.map(function(n,o){t.nodes.push({size:n.size?n.size:10,group:n.group?n.group:0,type:n.type&&n.type.length?n.type:"circle",name:n.name}),n.sources&&n.sources.map(function(n){t.links.push({source:e[n],target:o})}),n.destinations&&n.destinations.map(function(n){t.links.push({source:o,target:e[n]})})}),window.initiateD3(window.innerWidth,window.innerHeight,t,this.typeMapping,this.showTypeOnHover,"#d3-container")}else this.d3Container.nativeElement.innerHTML=""},n.prototype.ngOnChanges=function(n){n.data&&setTimeout(this.ngOnInit.bind(this),333)},n.prototype.ngOnInit=function(){this.data instanceof Array||(this.data=[this.data])},n.prototype.ngAfterViewInit=function(){return n=this,e=void 0,r=function(){var n=this;return o(this,function(e){switch(e.label){case 0:return window.initiateD3?[3,2]:[4,this.loadScript("assets/d3.js","d3js").then(function(){n.triggerEvaluation(n.data)})];case 1:e.sent(),e.label=2;case 2:return[2]}})},new((t=void 0)||(t=Promise))(function(o,i){function s(n){try{p(r.next(n))}catch(e){i(e)}}function a(n){try{p(r["throw"](n))}catch(e){i(e)}}function p(n){n.done?o(n.value):new t(function(e){e(n.value)}).then(s,a)}p((r=r.apply(n,e||[])).next())});var n,e,t,r},n.prototype.loadScript=function(n,e){return new Promise(function(e,t){var o=document.createElement("script");o.type="text/javascript",o.src=n,o.onload=e,document.body.appendChild(o)})},n.prototype.onchange=function(n){this.triggerEvaluation(n.points)},n}();r.decorators=[{type:e.Component,args:[{selector:"visualize-it",template:'\n<div class="legends" *ngIf="enableLegends">\n    <a (click)="showLegend = !showLegend;showHelp = false"><span class="legend">&#9830;</span></a>\n    <a (click)="showLegend = false;showHelp = !showHelp"><span class="help">?</span></a>\n    <div class="info" *ngIf="showLegend">\n<b>Link types:</b><br/>\n    <strong>Dotted line:</strong> Destination of a Node<br/>\n    <strong>Line:</strong> Source of a Node<br/>\n<br/><b>Node types:</b><br/>\n    <strong>circle</strong> - {{typeMapping[\'circle\']}}<br/>\n    <strong>square</strong> - {{typeMapping[\'square\']}}<br/>\n    <strong>triangle-up</strong> - {{typeMapping[\'triangle-up\']}}<br/>\n    <strong>diamond</strong> - {{typeMapping[\'diamond\']}}<br/>\n    <strong>cross</strong> - {{typeMapping[\'cross\']}}<br/>\n    <strong>triangle-down</strong> - {{typeMapping[\'triangle-down\']}}\n    </div>\n    <div class="info" *ngIf="showHelp">\n<b>Hover to highlight 1st-order neighbourhood. Click to fade surroundings.</b><br/>\n<b>Double-click to center node and zoom in. Hold SHIFT and Double-click to zoom out.</b><br/><br/>\n<b>Filter nodes by:</b><br/>\n    <strong>SHIFT + "C" :</strong> Show/hide all circle {{typeMapping[\'circle\'] ? "(" + typeMapping[\'circle\'] + ")" : ""}} nodes<br/>\n    <strong>SHIFT + "S" :</strong> Show/hide all square {{typeMapping[\'square\'] ? "(" + typeMapping[\'square\'] + ")" : ""}} nodes<br/>\n    <strong>SHIFT + "T" :</strong> Show/hide all triangle-up {{typeMapping[\'triangle-up\'] ? "(" + typeMapping[\'triangle-up\'] + ")" : ""}} nodes<br/>\n    <strong>SHIFT + "R" :</strong> Show/hide all diamond {{typeMapping[\'diamond\'] ? "(" + typeMapping[\'diamond\'] + ")" : ""}} nodes<br/>\n    <strong>SHIFT + "X" :</strong> Show/hide all cross {{typeMapping[\'cross\'] ? "(" + typeMapping[\'cross\'] + ")" : ""}} nodes<br/>\n    <strong>SHIFT + "D" :</strong> Show/hide all triangle-down {{typeMapping[\'triangle-down\'] ? "(" + typeMapping[\'triangle-down\'] + ")" : ""}} nodes<br/>\n    <strong>SHIFT + "L" :</strong> Show/hide all low range group (%33) nodes<br/>\n    <strong>SHIFT + "M" :</strong> Show/hide all medium range group (%50) nodes<br/>\n    <strong>SHIFT + "H" :</strong> Show/hide all high range group (%66) nodes<br/>\n    <strong>SHIFT + "1" :</strong> Show/hide all low range group (%33) links<br/>\n    <strong>SHIFT + "2" :</strong> Show/hide all medium range group (%50) links<br/>\n    <strong>SHIFT + "3" :</strong> Show/hide all high range group (%66) links\n    </div>\n</div>\n<div class="d3-container"\n    [style.width]="width"\n    [style.height]="height"\n    id="d3-container" #d3Container></div>\n',styles:[":host{\n  position:relative;\n  display:inline-block; }\n  :host .legends{\n    position:absolute;\n    right:20px;\n    top:22px;\n    z-index:3;\n    width:30px;\n    font-size:1.2rem;\n    background-color:#eee;\n    padding:3px 5px;\n    border-radius:15px; }\n    :host .legends a{\n      cursor:pointer;\n      font-weight:bold; }\n      :host .legends a:hover{\n        color:#fff; }\n    :host .legends .info{\n      padding:5px;\n      border:1px solid #888;\n      border-radius:5px;\n      position:absolute;\n      right:0px;\n      font-size:0.7rem;\n      line-height:1rem;\n      -webkit-box-shadow:1px 1px 3px #bbb;\n              box-shadow:1px 1px 3px #bbb;\n      background-color:#fff;\n      width:350px; }\n      :host .legends .info strong{\n        color:#8f0000;\n        font-size:0.8rem;\n        margin-left:20px; }\n  :host #d3-container{\n    border:1px solid #633;\n    padding:0 5px;\n    -webkit-box-sizing:border-box;\n            box-sizing:border-box;\n    border-radius:5px;\n    background-color:#fefefe;\n    margin:5px;\n    overflow:hidden; }\n"]}]}],r.ctorParameters=function(){return[]},r.propDecorators={enableLegends:[{type:e.Input,args:["enableLegends"]}],showTypeOnHover:[{type:e.Input,args:["showTypeOnHover"]}],data:[{type:e.Input,args:["data"]}],typeMapping:[{type:e.Input,args:["typeMapping"]}],width:[{type:e.Input,args:["width"]}],height:[{type:e.Input,args:["height"]}],onVisualization:[{type:e.Output,args:["onVisualization"]}],d3Container:[{type:e.ViewChild,args:["d3Container"]}]};var i=function(){return function(){}}();i.decorators=[{type:e.NgModule,args:[{imports:[t.CommonModule],declarations:[r],exports:[r],entryComponents:[r],providers:[],schemas:[e.CUSTOM_ELEMENTS_SCHEMA]}]}],i.ctorParameters=function(){return[]},n.VisualizeItComponent=r,n.VisualizeItModule=i,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=visualize-it.umd.min.js.map
