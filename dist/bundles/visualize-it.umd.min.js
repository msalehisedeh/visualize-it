!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],t):t(n["visualize-it"]={},n.ng.core,n.ng.common)}(this,function(n,t,e){"use strict";function o(n,t){var e,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(n,a)}catch(s){r=[6,s],o=0}finally{e=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var i=function(){function n(){this.onVisualization=new t.EventEmitter}return n.prototype.triggerEvaluation=function(n){if(n.length){this.d3Container.nativeElement.innerHTML="";var t={},e={links:[],nodes:[]};n.map(function(n,e){return t[n.id]=e}),n.map(function(n,o){e.nodes.push({size:n.size?n.size:10,group:n.group?n.group:0,name:n.name}),n.relatesTo&&n.relatesTo.map(function(n){e.links.push({source:o,target:t[n]})})}),window.initiateD3(window.innerWidth,window.innerHeight,e,"#d3-container")}else this.d3Container.nativeElement.innerHTML=""},n.prototype.ngOnChanges=function(n){n.data&&setTimeout(this.ngOnInit.bind(this),333)},n.prototype.ngOnInit=function(){this.data instanceof Array||(this.data=[this.data])},n.prototype.ngAfterViewInit=function(){return n=this,t=void 0,i=function(){var n=this;return o(this,function(t){switch(t.label){case 0:return window.initiateD3?[3,2]:[4,this.loadScript("assets/d3.js","d3js").then(function(){n.triggerEvaluation(n.data)})];case 1:t.sent(),t.label=2;case 2:return[2]}})},new((e=void 0)||(e=Promise))(function(o,r){function a(n){try{u(i.next(n))}catch(t){r(t)}}function s(n){try{u(i["throw"](n))}catch(t){r(t)}}function u(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(a,s)}u((i=i.apply(n,t||[])).next())});var n,t,e,i},n.prototype.loadScript=function(n,t){return new Promise(function(t,e){var o=document.createElement("script");o.type="text/javascript",o.src=n,o.onload=t,document.body.appendChild(o)})},n.prototype.onchange=function(n){this.triggerEvaluation(n.points)},n}();i.decorators=[{type:t.Component,args:[{selector:"visualize-it",template:'\n<div class="d3-container"\n    [style.width]="width"\n    [style.height]="height"\n    id="d3-container" #d3Container></div>\n',styles:[":host #d3-container{\n  border:1px solid #633;\n  padding:0 5px;\n  -webkit-box-sizing:border-box;\n          box-sizing:border-box;\n  border-radius:5px;\n  background-color:#fefefe;\n  margin:5px;\n  overflow:hidden; }\n"]}]}],i.ctorParameters=function(){return[]},i.propDecorators={data:[{type:t.Input,args:["data"]}],width:[{type:t.Input,args:["width"]}],height:[{type:t.Input,args:["height"]}],onVisualization:[{type:t.Output,args:["onVisualization"]}],d3Container:[{type:t.ViewChild,args:["d3Container"]}]};var r=function(){return function(){}}();r.decorators=[{type:t.NgModule,args:[{imports:[e.CommonModule],declarations:[i],exports:[i],entryComponents:[i],providers:[],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],r.ctorParameters=function(){return[]},n.visualizeItComponent=i,n.visualizeItModule=r,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=visualize-it.umd.min.js.map
