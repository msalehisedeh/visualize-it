{
  "version": 3,
  "file": "visualize-it.js",
  "sources": [
    "ng://visualize-it/out/src/app/visualize-it/visualize-it.module.ts",
    "ng://visualize-it/out/src/app/visualize-it/components/visualize-it.component.ts"
  ],
  "sourcesContent": [
    "import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { visualizeItComponent } from './components/visualize-it.component';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    visualizeItComponent\r\n  ],\r\n  exports: [\r\n    visualizeItComponent\r\n  ],\r\n  entryComponents: [\r\n    visualizeItComponent\r\n  ],\r\n  providers: [\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class visualizeItModule {}\r\n",
    "/*\r\n * tool to display result of a search on set of points of interests on objects.\r\n */\r\nimport {\r\n  Component,\r\n  OnInit,\r\n  OnChanges,\r\n  AfterViewInit ,\r\n  Input,\r\n  Output,\r\n  ViewChild,\r\n  EventEmitter\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'visualize-it',\r\n  template: `\r\n\r\n\r\n<div class=\"d3-container\" \r\n    [style.width]=\"width\"\r\n    [style.height]=\"height\"\r\n    id=\"d3-container\" #d3Container></div>\r\n`,\r\n  styles: [`:host #d3-container{\n  border:1px solid #633;\n  padding:0 5px;\n  -webkit-box-sizing:border-box;\n          box-sizing:border-box;\n  border-radius:5px;\n  background-color:#fefefe;\n  margin:5px;\n  overflow:hidden; }\n`],\r\n})\r\nexport class visualizeItComponent implements OnInit, AfterViewInit, OnChanges  {\r\n\r\n  @Input(\"data\")\r\n  data: any;\r\n\r\n  @Input(\"width\")\r\n  width: string;\r\n\r\n  @Input(\"height\")\r\n  height: string;\r\n\r\n  @Output(\"onVisualization\")\r\n  onVisualization = new EventEmitter();\r\n\r\n  @ViewChild(\"d3Container\")\r\n  d3Container;\r\n\r\n  private triggerEvaluation(points) {\r\n    if (points.length) {\r\n      this.d3Container.nativeElement.innerHTML = \"\";\r\n      const indexOf = {};\r\n      const dataSet = {\r\n        links:[],\r\n        nodes: []\r\n      };\r\n      points.map( (node,index) => indexOf[node.id] = index);\r\n      points.map( (node, i) => {\r\n        dataSet.nodes.push({\r\n          size: node.size ? node.size: 10, \r\n          group: node.group? node.group : 0, \r\n          name: node.name\r\n        });\r\n        if(node.relatesTo) {\r\n          node.relatesTo.map( (id) => {\r\n            dataSet.links.push({source: i, target: indexOf[id]});\r\n          })\r\n        }\r\n      })\r\n      window['initiateD3'](window.innerWidth, window.innerHeight, dataSet, \"#d3-container\");\r\n    } else {\r\n      this.d3Container.nativeElement.innerHTML = \"\";\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: any) {\r\n    if (changes.data) {\r\n      setTimeout(this.ngOnInit.bind(this), 333);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if( !(this.data instanceof Array)) {\r\n      this.data = [this.data];\r\n    }\r\n  }\r\n\r\n  async ngAfterViewInit() {\r\n    if (!window['initiateD3']) {\r\n      await this.loadScript(\"assets/d3.js\", 'd3js').then( () => {\r\n        this.triggerEvaluation(this.data);\r\n      });\r\n    }\r\n \t}\r\n   \r\n\tprivate loadScript(url, id) {    \r\n    return new Promise((resolve, reject) => {\r\n      const scriptElement = document.createElement('script');\r\n    \r\n      scriptElement.type = \"text/javascript\";\r\n      scriptElement.src = url;\r\n      scriptElement.onload = resolve;\r\n      \r\n      document.body.appendChild(scriptElement);\r\n\t\t})\r\n  }\r\n  \r\n  onchange(event) {\r\n    this.triggerEvaluation(event.points);\r\n  }\r\n}\r\n"
  ],
  "names": [],
  "mappings": "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"
}
